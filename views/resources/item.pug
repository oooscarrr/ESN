extends /views/layout
include /views/mixins/navbar

block title
    title Resource Item
block append scripts
    script(src='/socket.io/socket.io.js')
    script(src='/javascripts/resources/item.js')
block append stylesheets
    link(rel='stylesheet', href='/stylesheets/board.css')
    
block content
    +navbar 
    .horizontal.centered.box
        .ui.container#itemDetailContainer
            .returnButton(onClick='window.history.back()')
                i.angle.left.icon.large
            .ui.header.centered
                h2 #{item.name}
                .sub.header #{item.ownerName}, #{item.quantity} available
            .ui.centered.medium.image#itemImage
                img(src=item.imageURL || '/images/defaultImage.png')
            .ui.segment
                p #{item.description}
            .ui.right.floated.buttons
                if isOwner
                    .ui.button#editButton Edit
                    .ui.red.button#deleteButton Delete
                else if requested
                    .ui.button#cancelRequestButton Cancel Request
                else
                    .ui.green.button#requestButton Request
        
        .ui.mini.modal#confirmDeleteModal
            .header Confirm Delete
            .content Are you sure you want to delete this item?
            .actions
                .ui.buttons 
                    .ui.button#cancelDeleteButton No
                    .or
                    .ui.button.red#confirmDeleteButton Yes
        
        .ui.modal#editModal
            .header Edit Item
            .content
                form.ui.form#editForm
                    .field#nameField
                        label Name
                        input#name(type='text', name='name', value=item.name)
                    .field#quantityField
                        label Quantity
                        input#quantity(type='number', name='quantity', value=item.quantity)
                    .field
                        label Description
                        textarea#description(type='text', name='description') #{item.description}
                    .field
                        label Upload Image
                        input#image(type='file', accept='image/*', name='image')
            .actions
                .ui.button#cancelEditButton Cancel
                .ui.button.green#confirmEditButton Save