extends /views/layout
include /views/mixins/navbar

block title
    title ESN Directory 
block append scripts
    script(src='/socket.io/socket.io.js')
    script(src='javascripts/users/list.js')
    script(src='/javascripts/navbar.js')
block content
    - const statusIconDict = {'undefined': 'question circle', 'ok': 'smile icon', 'help': 'frown icon', 'emergency': 'exclamation triangle'}
    - const statusColorDict = {'undefined': 'grey', 'ok': 'rgb(50, 178, 50)', 'help': 'rgb(248, 167, 37)', 'emergency': 'red'}
    +navbar
    .horizontal.centered.box#contentBox
        h1 ESN Directory
        .ui.container#DirectoryBox
            .ui.fluid.accordion#DirectoryContent
                - online_users = users.filter(user => user.isOnline)
                - offline_users = users.filter(user => !user.isOnline)
                .title.active
                    i.dropdown.icon
                    span Online Users
                    span.ui.label #{online_users.length}
                .content.active
                    .ui.relaxed.divided.list
                        for user in online_users
                            .item.user-row
                                i.big.icon(class=statusIconDict[user.lastStatus] style='color: '+statusColorDict[user.lastStatus])
                                .content
                                    a.username(href='/users/' + user._id) #{user.username}
                .title
                    i.dropdown.icon
                    span Offline Users
                    span.ui.label #{offline_users.length}
                .content
                    .ui.relaxed.divided.list
                        for user in offline_users
                            .item.user-row
                                i.big.icon(class=statusIconDict[user.lastStatus] style='color: '+statusColorDict[user.lastStatus])
                                .content
                                    a.username.offline(href='/users/' + user._id) #{user.username}
        


        

